{% extends "layout.html" %}

{% block title %}
    Log In
{% endblock %}

{% block main %}
    <form action="/register" method="post" name="form">
        <label for="screen_name">You can change this from your account settings</label>
        <div class="form-group">
            <input autocomplete="off" autofocus class="form-control" name="screen_name" placeholder="Screen name" type="text">
        </div>
        <label for="password">Password must contain at least one number</label>
        <div class="form-group">
            <input class="form-control" name="password" id="password" placeholder="Password" type="password">
        </div>
        <div class="form-group">
            <input class="form-control" name="password-cnfrm" placeholder="Confirm Password" type="password">
        </div>
        <button id = "button" class="btn btn-primary" type="submit">Log In</button>
    </form>

    <script>
        let user = document.querySelector("input[name='username']");
        document.querySelector("#button").addEventListener("click", function(event){
            event.preventDefault();
            $.get("/check?username=" + user.value, function(data){
                if (data == false){
                    alert("Username taken. Please select a different username.");
                }
                else{
                    document.querySelector("form").submit();
                }
            })
        })
    </script>
{% endblock %}
